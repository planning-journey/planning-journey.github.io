# History - 2026년 1월 5일 (월요일)

## 요청 내용

할 일 클릭 시 할 일 수정 모달이 아닌 할 일 상세 모달을 열어주고, 할 일 상세 모달은 할 일의 목표, 날짜, 이름, 설명을 Readonly 상태로 조회할 수 있으며, 설명은 마크다운 프리뷰를 통해 볼 수 있게 수정.

## 작업 내용

사용자의 요청에 따라 할 일 클릭 시 할 일 상세 모달이 열리도록 기능을 구현했습니다.

### 1. `react-markdown` 및 `@tailwindcss/typography` 설치 및 설정
- Markdown 설명을 렌더링하기 위해 `react-markdown` 라이브러리를 설치했습니다.
- Markdown 콘텐츠 스타일링을 위해 `@tailwindcss/typography` 플러그인을 설치하고 `tailwind.config.js`에 추가했습니다.

```bash
npm install react-markdown @tailwindcss/typography
```
```javascript
// tailwind.config.js
module.exports = {
  // ...
  plugins: [
    require('@tailwindcss/typography'),
  ],
};
```

### 2. `src/components/TaskDetailModal.tsx` 파일 추가
- 새로운 `TaskDetailModal` 컴포넌트를 생성했습니다.
- 이 모달은 `Task` 객체를 prop으로 받아 할 일의 목표, 날짜, 이름, 설명을 읽기 전용으로 표시합니다.
- 설명(`task.description`)은 `react-markdown`을 사용하여 Markdown 프리뷰로 렌더링됩니다.
- 닫기 버튼을 포함한 기본적인 모달 구조를 구현했습니다.

```typescript
// src/components/TaskDetailModal.tsx (주요 내용 요약)
import React from 'react';
import ReactMarkdown from 'react-markdown';
// ...
const TaskDetailModal: React.FC<TaskDetailModalProps> = ({ isOpen, onClose, task }) => {
  // ...
  return (
    // ...
          {/* Goal, Date, Task Name 표시 */}
          {/* Description */}
          {task.description && (
            <div>
              <p>설명:</p>
              <div className="prose dark:prose-invert max-w-none">
                <ReactMarkdown>{task.description}</ReactMarkdown>
              </div>
            </div>
          )}
    // ...
  );
};
export default TaskDetailModal;
```

### 3. `src/components/TaskList.tsx` 파일 수정
- `TaskListProps`에 `onViewTaskDetail: (task: Task) => void;` prop을 추가했습니다.
- `TaskItem` 컴포넌트에 `onView={onViewTaskDetail}`을 전달하여, 할 일 클릭 시 상세 모달을 열도록 했습니다.
- 기존 `onEditTask` prop은 `TaskItem` 내의 별도 수정 버튼을 통해 사용할 수 있도록 유지했습니다.
- `TaskEditorModal` 및 관련 상태 관리 로직은 상위 컴포넌트인 `DailyDetailArea.tsx`로 이동되었습니다.

```typescript
// src/components/TaskList.tsx (주요 내용 요약)
interface TaskListProps {
  // ...
  onViewTaskDetail: (task: Task) => void; // 상세 보기 prop 추가
  onEditTask: (task: Task) => void; // 수정 prop 유지
  // ...
}
const TaskList: React.FC<TaskListProps> = ({ tasks, onViewTaskDetail, onDeleteTask, onToggleComplete, onEditTask }) => {
  // ...
        <TaskItem
          // ...
          onView={onViewTaskDetail} // 상세 보기 핸들러 전달
          onEdit={onEditTask}     // 수정 핸들러 전달
          // ...
        />
  // ...
};
```

### 4. `src/components/TaskItem.tsx` 파일 수정
- `TaskItemProps`에서 기존 `onEdit` prop의 역할을 `onView` prop으로 변경했습니다. 즉, `TaskItem`의 메인 클릭 액션(`onClick={() => onView(task)}`)은 이제 할 일 상세 모달을 엽니다.
- `onEdit: (task: Task) => void;` prop을 다시 추가하여, 할 일 아이템 내부에 명시적인 수정 및 삭제 메뉴를 통해 수정 기능을 호출할 수 있도록 했습니다.
- 할 일 아이템 우측에 `MoreVertical` 아이콘 버튼을 추가하고, 클릭 시 `Edit`, `Trash` 버튼을 포함하는 드롭다운 메뉴를 표시하도록 구현했습니다. 이 메뉴를 통해 `onEdit`과 `onDelete` 함수를 호출합니다.
- 체크박스 클릭 시 상세 모달이 열리지 않도록 `e.stopPropagation()`을 추가했습니다.

```typescript
// src/components/TaskItem.tsx (주요 내용 요약)
import { MoreVertical, Edit, Trash } from 'lucide-react'; // 아이콘 임포트
interface TaskItemProps {
  task: Task;
  onView: (task: Task) => void;   // 상세 보기 prop
  onEdit: (task: Task) => void;   // 수정 prop
  // ...
}
const TaskItem: React.FC<TaskItemProps> = ({ task, onView, onEdit, onDelete, onToggleComplete }) => {
  // ...
  return (
    <div
      className="flex items-start justify-between cursor-pointer"
      onClick={() => onView(task)} // 메인 클릭 시 상세 보기 호출
    >
      {/* ... Task 내용 표시 ... */}
      {/* More Options / Edit / Delete Menu */}
      <div className="relative">
        <button onClick={(e) => { e.stopPropagation(); setIsMenuOpen(!isMenuOpen); }}>
          <MoreVertical />
        </button>
        {isMenuOpen && ( /* ... 드롭다운 메뉴 ... */ )}
      </div>
    </div>
  );
};
```

### 5. `src/components/DailyDetailArea.tsx` 파일 수정
- `TaskDetailModal` 컴포넌트를 임포트했습니다.
- `isTaskDetailModalOpen`과 `taskToView` 상태 변수를 추가하여 상세 모달의 가시성과 표시할 할 일을 관리합니다.
- `handleViewTaskDetail` 함수를 구현하여 `taskToView`를 설정하고 상세 모달을 엽니다.
- `TaskList` 컴포넌트에 `onViewTaskDetail` prop을 전달했습니다.
- `isTaskDetailModalOpen` 상태에 따라 `TaskDetailModal`을 조건부 렌더링하도록 추가했습니다.
- `TaskEditorModal`의 `onClose` prop 내부에서 `setIsTaskEditorModal` 대신 `setIsTaskEditorModalOpen`을 올바르게 호출하도록 수정했습니다.

```typescript
// src/components/DailyDetailArea.tsx (주요 내용 요약)
import TaskDetailModal from './TaskDetailModal'; // TaskDetailModal 임포트
const DailyDetailArea: React.FC<DailyDetailAreaProps> = ({ selectedDate }) => {
  // ...
  const [isTaskEditorModalOpen, setIsTaskEditorModalOpen] = useState(false);
  const [isTaskDetailModalOpen, setIsTaskDetailModalOpen] = useState(false); // 상세 모달 상태
  const [taskToView, setTaskToView] = useState<Task | null>(null);         // 상세 보기 할 일 상태
  // ...
  const handleViewTaskDetail = (task: Task) => { // 상세 보기 핸들러
    setTaskToView(task);
    setIsTaskDetailModalOpen(true);
  };
  // ...
  return (
    // ...
        <TaskList
          // ...
          onViewTaskDetail={handleViewTaskDetail} // TaskList에 핸들러 전달
          onEditTask={handleEditTask}
          // ...
        />
    // ...
      <TaskEditorModal
        isOpen={isTaskEditorModalOpen}
        onClose={() => {
          setIsTaskEditorModalOpen(false); // 올바른 setter 호출
          setTaskToEdit(null);
        }}
        // ...
      />
      <TaskDetailModal // 상세 모달 렌더링
        isOpen={isTaskDetailModalOpen}
        onClose={() => {
          setIsTaskDetailModalOpen(false);
          setTaskToView(null);
        }}
        task={taskToView}
      />
    </div>
  );
};
```

### 6. 테스트
- 프로젝트에 별도의 테스트 프레임워크 설정이 없어 자동화된 단위 테스트를 추가하지 못했습니다. 대신, 사용자에게 애플리케이션을 실행하여 수동으로 기능 변경 사항을 확인할 것을 안내했습니다.

### 7. 커밋
- 위의 모든 변경 사항은 하나의 커밋으로 저장되었습니다.
  `feat: Implement task detail modal with markdown preview`
